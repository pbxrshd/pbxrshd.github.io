var _accw={unload:[],run:[]};_accw.location=document.location.href;_accw.referrer=document.referrer;_accw.title=document.title.substring(0,_accw.strLim);_accw.ts=function(){var a;(a=Date.now?Date.now():(new Date).getTime())||(a=0);return a};_accw.injectToken=function(a,b,c){if(1<=a.length){var d=document.createElement("input");d.setAttribute("type","hidden");d.setAttribute("id",c);d.setAttribute("name",c);d.setAttribute("value",b);for(i=0;i<a.length;i++)if(""!==a[i]&&void 0!==a[i]&&null!==a[i]){b=document.getElementById(a[i]);if(null===b||null===b||void 0===b)if(b=document.getElementsByName(a[i]),null===b.name||null===b.name||void 0===b.name)b=null;null!==b&&b.appendChild(d)}}};_accw.buildLabelsDict=function(){var a=document.getElementsByTagName("label"),b={};for(i=0;i<a.length;i++)void 0===a[i].textContent||null===a[i].textContent||void 0===a[i].htmlFor||null===a[i].htmlFor||""===a[i].htmlFor&&""===a[i].textContent||(b[a[i].htmlFor]=a[i].textContent);return b};_accw.mapEventIds=function(a,b,c){null!==c.target.id&&void 0!==c.target.id&&""!==c.target.id?c.target.id in b?a[b[c.target.id]]=b[c.target.id]in a?a[b[c.target.id]]+1:1:null!==c.target.name&&void 0!==c.target.name&&""!==c.target.name?a[c.target.name]=c.target.name in a?a[c.target.name]+1:1:a[c.target.id]=c.target.id in a?a[c.target.id]+1:1:null!==c.target.name&&void 0!==c.target.name&&""!==c.target.name?a[c.target.name]=c.target.name in a?a[c.target.name]+1:1:a._="_"in a?a._+1:1;return a};_accw.okResponse=function(){return!0};_accw.bufferOperation=function(a,b){var c={};b="undefined"!==typeof b?b:null;try{localStorage.getItem("_accwPending")&&(c=JSON.parse(localStorage.getItem("_accwPending"))),"load"!=a&&b&&("delete"===a?delete c[b]:"insert"===a&&(c.hasOwnProperty(b)||(c[b]=_accw.ts())),localStorage.setItem("_accwPending",JSON.stringify(c)))}catch(d){console.log("Could not purge pending item")}return c};_accw.asB64=function(a){return btoa(unescape(encodeURIComponent(JSON.stringify(a))))};_accw.pushMetric=function(a,b,c,d){!b&&a.hasOwnProperty("sc")&&1>a.sc||(a=_accw.asB64(a),_accw.loadFromURL(c+_accw.client+"/"+_accw.token+"/"+d+a,null))};_accw.eventAsObject=function(a,b){a={coordinates:[null!==a.clientX?a.clientX:0,null!==a.clientY?a.clientY:0]};1==b&&(a.time=_accw.ts());return a};_accw.eventCoordinates=function(a){var b=null!==a.clientX?a.clientX:0;a=null!==a.clientY?a.clientY:0;(t=_accw.ts())||(t=0);return[t,b,a]};_accw.add=function(a,b){return a+b};_accw.stopIntervals=function(a){for(id=0;id<a.length;id++)window.clearInterval(a[id])};_accw.cloneObject=function(a){var b={};for(i in a)b[i]=a[i];return b};_accw.onbeforeunload=function(){for(f=0;f<_accw.unload.length;f++)if(_accw.unload[f].name.toLowerCase()===_accw.config.pid.toLowerCase())_accw.unload[f]()};_accw.onbeforechange=function(){_accw.onbeforeunload();_accw.referrer=_accw.location;_accw.location=document.location.href;_accw.title=document.title.substring(0,_accw.strLim);_accw.start=_accw.ts()};_accw.onFormSubmit=function(){_accw.onbeforeunload()};window.addEventListener("beforeunload",_accw.onbeforeunload,!1);window.addEventListener("hashchange",_accw.onbeforechange,!1);window.addEventListener("submit",_accw.onFormSubmit,!1);_accw.customEvent=function(a,b){if(_accw.hasOwnProperty("start")){var c={c:_accw.location,r:_accw.referrer,sid:_accw.sessionId,st:0,sd:0,sc:1,avg:0,t:_accw.title,lts:_accw.ts()};b="undefined"!==typeof b?b:null;if(null!==b){try{if(JSON.stringify(b).length>_accw.evStrLim){console.log("Too many events per collection");return}}catch(d){console.log("Invalid values format");return}for(key in b)c[key]=b[key]}c=_accw.asB64(c);_accw.loadFromURL(_accw.config.bu+_accw.client+"/"+_accw.token+"/"+a+"/"+c,null)}};_accw.distance=function(a,b){return a&&b&&1<a.length&&1<b.length?Math.sqrt((b[1]-=a[1])*b[1]+(b[2]-=a[2])*b[2]):0};_accw.totalDistance=function(a){var b=[],c=0;if(2>a.length)return 0;for(i=0;i<a.length;i++){var d=Math.abs(parseInt(_accw.distance(a[i],a[i+1])));0<d&&b.push(d)}for(i=0;i<b.length;i++)c+=b[i];return c};_accw.loginSuccess=function(){_accw.customEvent(_accw.config.cfn+".loginSuccess",{action:"login success"})};_accw.loginFailure=function(){_accw.customEvent(_accw.config.cfn+".loginFailure",{action:"login failure"})};_accw.execSearch=function(){_accw.customEvent(_accw.config.cfn+".execSearch",{action:"exec search"})};_accw.addToBasket=function(){_accw.customEvent(_accw.config.cfn+".addToBasket",{action:"add to basket"})};_accw._k1=function(){var b={},a=[],d=[],f=[],g=0,h=[],m=_accw.buildLabelsDict();b={c:_accw.location,r:_accw.referrer,t:_accw.title,sid:_accw.sessionId,sd:0};a={c:_accw.location,r:_accw.referrer,t:_accw.title,sid:_accw.sessionId,sd:0};b.m={};b.fm={};a.p=[];_accw.onkeydown=function(c){d.push(_accw.ts());var a=2>c.key.length?c.key.charCodeAt(0):c.key;g+=1;b.m.hasOwnProperty(a)?b.m[a]+=1:b.m[a]=1;b.fm=_accw.mapEventIds(b.fm,m,c)};window.addEventListener("keydown",_accw.onkeydown,!1);_accw.onkeyup=function(a){f.push(_accw.ts())};window.addEventListener("keyup",_accw.onkeyup,!1);var l=function(){var c=!0;for(k in b.m){c=!1;break}c||(b.sc=g,b.st=0,b.avg=0,_accw.pushMetric(b,!1,_accw.config.bu,"keymaps/"),b.m={},b.fm={},g=0);if(0<d.length){for(e=0;e<f.length;e++)c=0,isNaN(f[e])||"undefined"!==d[e]&&(c=f[e]-d[e]),isNaN(c)&&(c=1),0<c&&a.p.push(Math.abs(c));a.sc=a.p.length;for(i=c=0;i<a.p.length;i++)c+=a.p[i];a.st=c;a.avg=0;0<a.p.length&&(a.p=a.p.slice(0,_accw.elimit),_accw.pushMetric(a,!1,_accw.config.bu,"keypace/"));a.p.length=0;d.length=0;f.length=0}};interval=window.setInterval(l,_accw.config.kpp);h.push(interval);_accw.unload.push(function _acc_w(){_accw.stopIntervals(h);keyForce=!0;l()})};_accw._m1=function(){var b=null,a={};a={l:[],c:_accw.location,r:_accw.referrer,t:_accw.title,sid:_accw.sessionId};var c=[],e=!1;_accw.onmousemove=function(a){b=_accw.eventCoordinates(a)};window.addEventListener("mousemove",_accw.onmousemove,!1);var f=function(){0<a.l.length&&(a.l=a.l.slice(0,_accw.elimit),a.sd=_accw.totalDistance(a.l),a.st=_accw.config.mpp,a.sc=a.l.length,a.avg=0,_accw.pushMetric(a,e,_accw.config.bu,"mousetrack/"));a.l.length=0},d=window.setInterval(function(){b&&a.l.push(b);b=null},_accw.config.mpc);c.push(d);d=window.setInterval(f,_accw.config.mpp);c.push(d);_accw.unload.push(function _acc_w(){_accw.stopIntervals(c);e=!0;f()})};_accw._m2=function(){var c=[],d=!1,a={},e=_accw.buildLabelsDict();a={lb:[],rb:[],c:_accw.location,r:_accw.referrer,t:_accw.title,sid:_accw.sessionId,fm:{}};_accw.onclick=function(b){a.lb.push(_accw.eventCoordinates(b));a.fm=_accw.mapEventIds(a.fm,e,b)};window.addEventListener("click",_accw.onclick,!1);_accw.oncontextmenu=function(b){a.rb.push(_accw.eventCoordinates(b));a.fm=_accw.mapEventIds(a.fm,e,b)};window.addEventListener("contextmenu",_accw.oncontextmenu,!1);var f=function(){if(0<a.lb.length||0<a.rb.length)a.sd=0,a.sc=a.lb.length+a.rb.length,a.st=_accw.config.cpp,a.avg=0,_accw.pushMetric(a,d,_accw.config.bu,"mouseclick/"),a.lb.length=0,a.rb.length=0,a.fm={}},g=window.setInterval(f,_accw.config.cpp);c.push(g);_accw.unload.push(function _acc_w(){_accw.stopIntervals(c);d=!0;f()})};_accw._m3=function(){var a=0,b=0,c=0,d=[];_accw.onmousemovecount=function(b){a=1;c+=_accw.config.mpc};window.addEventListener("mousemove",_accw.onmousemovecount,!1);var e=window.setInterval(function(){1==a&&b++;a=0},_accw.config.mpc);d.push(e);_accw.unload.push(function _acc_w(){_accw.stopIntervals(d);mouseTiming={sc:b,st:c,sd:0,avg:0,c:_accw.location,r:_accw.referrer,t:_accw.title,sid:_accw.sessionId};_accw.pushMetric(mouseTiming,!0,_accw.config.bu,"mouseoverall/")})};_accw._n1=function(){var a={r:_accw.referrer,t:_accw.title,c:_accw.location,sid:_accw.sessionId,tf:_accw.tokenFound,st:0,sd:0,sc:1,avg:0};_accw.unload.push(function _acc_w(){a.e="u";var b=_accw.asB64(a);_accw.loadFromURL(_accw.config.bu+_accw.client+"/"+_accw.token+"/navigation/"+b,null)});a.e="l";var b=_accw.asB64(a);_accw.loadFromURL(_accw.config.bu+_accw.client+"/"+_accw.token+"/navigation/"+b,null)};_accw._p1=function(){var c=[],d=!1,a={};a={p:{},c:_accw.location,r:_accw.referrer,t:_accw.title,sid:_accw.sessionId};var f=_accw.buildLabelsDict();_accw.onpaste=function(b){a.p=_accw.mapEventIds(a.p,f,b)};window.addEventListener("paste",_accw.onpaste,!1);var e=function(){var b=a.sd=0;for(item in a.p)b+=a.p[item];a.sc=b;a.st=_accw.config.ppp;a.avg=0;_accw.pushMetric(a,d,_accw.config.bu,"paste/");a.p={}},g=window.setInterval(e,_accw.config.ppp);c.push(g);_accw.unload.push(function _acc_w(){_accw.stopIntervals(c);d=!0;e()})};_accw._s1=function(){var b=null,c=null,a={};a={c:_accw.location,r:_accw.referrer,t:_accw.title,sid:_accw.sessionId,w:[],s:[]};var d=[],f=!1;_accw.onscroll=function(a){b=_accw.eventCoordinates(a)};window.addEventListener("scroll",_accw.onscroll,!1);_accw.onwheel=function(a){c=_accw.eventCoordinates(a)};window.addEventListener("wheel",_accw.onwheel,!1);var g=function(){if(0<a.w.length||0<a.s.length)a.s=a.s.slice(0,_accw.elimit),a.w=a.w.slice(0,_accw.elimit),a.sd=_accw.totalDistance(a.w)+_accw.totalDistance(a.s),a.sc=a.w.length+a.s.length,a.st=0,a.avg=0,_accw.pushMetric(a,f,_accw.config.bu,"scrolling/"),a.w.length=0,a.s.length=0},e=window.setInterval(function(){b&&(a.s.push(b),b=null);c&&(a.w.push(c),c=null)},_accw.config.spc);d.push(e);e=window.setInterval(g,_accw.config.spp);d.push(e);_accw.unload.push(function _acc_w(){_accw.stopIntervals(d);f=!0;g()})};_accw._t1=function(){_accw.onload=function(){_accw.start=_accw.ts()};window.addEventListener("load",_accw.onload,!1);_accw.unload.push(function _acc_w(){_accw.end=_accw.ts();var a={c:_accw.location,r:_accw.referrer,st:_accw.end-_accw.start,sd:0,sc:1,avg:0,t:_accw.title,sid:_accw.sessionId};_accw.hasOwnProperty("inauthTid")&&(a.inauth_tid=_accw.inauthTid);a=_accw.asB64(a);_accw.loadFromURL(_accw.config.bu+_accw.client+"/"+_accw.token+"/timing/"+a,null)})};_accw.inCheckout=function(){var a=_accw.ts();_accw.hasOwnProperty("start")&&(a={c:_accw.location,r:_accw.referrer,st:a-_accw.start,sd:0,sc:1,avg:0,t:_accw.title,sid:_accw.sessionId},a=_accw.asB64(a),_accw.loadFromURL(_accw.config.bu+_accw.client+"/"+_accw.token+"/checkout/"+a,null))};_accw._t2=function(){var b=[],c=[],d=[],k=!1,f=null,a={l:[],c:_accw.location,r:_accw.referrer,sid:_accw.sessionId,t:_accw.title},g=[];document.addEventListener("touchstart",function(){c.push(_accw.ts())},!1);document.addEventListener("touchend",function(a){d.push(_accw.ts())},!1);document.addEventListener("touchmove",function(a){touches=a.changedTouches[0];f=_accw.eventCoordinates(touches)},!1);var l=function(){0<a.l.length&&(a.sd=_accw.totalDistance(a.l),a.st=_accw.config.tpp,a.sc=a.l.length,a.avg=0,_accw.pushMetric(a,k,_accw.config.bu,"touchtrack/"));a.l.length=0},h=window.setInterval(function(){f&&(a.l.push(f),f=null)},_accw.config.tpc);g.push(h);h=window.setInterval(l,_accw.config.tpp);g.push(h);_accw.unload.push(function _acc_w(){_accw.stopIntervals(g);k=!0;l();if(0<c.length&&c.length==d.length){for(e=0;e<d.length;e++)null!==d[e]&&null!==c[e]?b.push(d[e]-c[e]):b.push(1);var a=0;for(i=0;i<b.length;i++)a+=b[i];b=btoa(unescaped(encodeURIComponent(JSON.stringify({c:_accw.location,r:_accw.referrer,p:b,sc:keyPace.length,st:a,sd:0,avg:0,t:_accw.title,sid:_accw.sessionId}))));_accw.loadFromURL(_accw.config.bu+_accw.client+"/"+_accw.token+"/touchpace/"+b,null)}})};_accw.token="UNDEFINED-ACCW-TOKEN";_accw.client="interceptas_prod";_accw.forms=["listForm","mainForm","loginForm"];_accw.sessionId="4B812E0C032F1051CDA9F3153A591846";if(!_accw.hasOwnProperty("start")){_accw.start=_accw.ts();}
_accw.strLim=120;_accw.evStrLim=7000;_accw.elimit=90;_accw.config={"bu":"https://prod.accdab.net/wrapper/accw/","cpp":10000,"kpp":10000,"mpc":100,"mpp":10000,"ppp":10000,"spc":100,"spp":10000,"tpc":100,"tpp":10000,"pid":"_acc_w","cfn":"_acsf"};_accw.loadFromURL=function(url,callback,skipBufferInsert){if(_accw.token==="UNDEFINED-ACCW-TOKEN"){return;}else if(url.indexOf("UNDEFINED-ACCW-TOKEN")>=0){url=url.replace("UNDEFINED-ACCW-TOKEN",_accw.token);}
callback=typeof callback!=='undefined'?callback:null;skipBufferInsert=typeof skipBufferInsert!=='undefined'?skipBufferInsert:null;if(url===""||url.length>8000){return;}
if(skipBufferInsert===null){_accw.bufferOperation("insert",url);}
var h=document.getElementsByTagName("head")[0];var s=document.createElement("script");s.type="text/javascript";s.src=url;s.onreadystatechange=callback;h.appendChild(s);s.addEventListener("load",function(){_accw.bufferOperation("delete",url);},false);};_accw.sendPending=function(){pending=_accw.bufferOperation("load");for(url in pending){if((parseInt(pending[url])+36000)>=_accw.ts()){_accw.loadFromURL(url,null,true);}else{_accw.bufferOperation("delete",url);}}};_accw.loadServices=function(){var service_url="https://prod.accdab.net/wrapper/accw/"+_accw.client;service_url=service_url+"/_iac.js";service_url="";_accw.loadFromURL(service_url,null,true);};_accw.onMessage=function(message){if(message.origin.split('/')[2]==="https://prod.accdab.net/wrapper/accw".split('/')[2]){_accw.token=message.data;_accw.injectToken(_accw.forms,_accw.token,"_accwToken");_accw.loadServices();var lsf=document.getElementById('accw_token_provider');if(lsf!==null){lsf.outerHTML='';}}
return;}
window.addEventListener('message',_accw.onMessage,false);_accw.loadLsf=function(){_accw.lsf=document.createElement('iframe');_accw.lsf.id='accw_token_provider'
_accw.lsf.style.display='none';_accw.lsf.src='https://prod.accdab.net/wrapper/accw/'+_accw.client+'/lsf.png';document.body.appendChild(_accw.lsf);};window.addEventListener('load',_accw.loadLsf,false);try{if(typeof(Storage)!=="undefined"){_accw.sendPending();}}catch(storageErr){console.log("Pending events will not queue because no local storage is avaliable");}
_accw._p1();_accw._n1();_accw._k1();_accw._t1();_accw._m1();_accw._m2();_accw._t2();_accw._s1();